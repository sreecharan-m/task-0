<!DOCTYPE html>
<html>
 
 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="index.css">
   
    <title>FAST</title>
 
</head>
<body>
    
  <div class="content">
      <div class="top">
            <div id="time">
                <div class="topcontent">TIME</div>
                <div id="timevalue"></div>
            </div>
            <div id="besttime">
                <div class="topcontent">BEST TIME</div>
                <div id="besttimevalue"></div>
            </div>
      </div>
 
      <div class="welcome">
            <div class="intro">
           
            <i>Let's Find Whose Is The Fastest...!<br> Click The Numbers In Ascending Order As Fast As You Can</i>
             
 
            </div>
            <div class="gamename">
                Never Settle
            </div>
      </div>
 
      <div class="layout">
         <div id="tableencloser"> 
            
         </div>
      </div>
</div>
<script>
 
 let totall=3;
 let tableBox =document.getElementById('tableencloser');
 let bestTime = document.getElementById('besttimevalue');
 let bestScore;
 localStorage.bestScore=0;
 bestTime.innerHTML = localStorage.bestScore;

 function startCountdown() {
      
            console.log("enetred");
            var timerIdd = setInterval(function() {
            
            tableBox.innerHTML = totall.toFixed(0);
            totall = totall-1; 
            
            if(totall < 0){
              
              clearInterval(timerIdd);

              tableBox.innerHTML='';
              var tbl = document.createElement('table');  

                let data = [[11,5,16,2,10],[13,8,18,4,6],[7,12,19,1,9],[20,15,14,17,13]];

                data.forEach(function(el) {
                
                var tr = document.createElement("tr");
                let arr = el;

                arr.forEach(function(el) {  
                var td = document.createElement("td");
                td.appendChild(document.createTextNode(el));
                td.className="value";
                tr.appendChild(td);
                })
                 

                 tbl.appendChild(tr);  
               });

            tableBox.appendChild(tbl);

          
          timeRun();
          clickevent();
        }
          
      }, 1000);
      
}

 startCountdown();

function timeRun(){

   let timeValue = document.getElementById('timevalue');


        startTime = new Date().getTime();

         
        timerId = setInterval(function() {
        total = (new Date().getTime() - startTime) / 1000;

        
        timeValue.innerHTML = total.toFixed(3);
        
         if(total >=61){
        
         alert("Hey its toooo slow....not eligeble...Try again Later");

         clearInterval(timerId);
         } 
          
      }, 1);

}





function clickevent(){


const tableItems = document.getElementsByClassName('value');

for(const elements of tableItems){
     
    var p=0;

    elements.addEventListener("click",function(event){
          
        
        elements.classList.add('clicked');
        p=p+1;
        if(p>=20){

         clearInterval(timerId);
         if(localStorage.bestScore < total){

          localStorage.bestScore = total;
        }
          
          bestTime.innerHTML = localStorage.bestScore;
         
        }
        //startCountdown();
    }) 
}

//startCountdown();
}
 
</script>  
  
</body>
 
</html>